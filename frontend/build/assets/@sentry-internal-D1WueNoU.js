import{G as R,a as C,m as H,t as y,f as E,b as S,u as X,s as M,i as P,c as b,d as _}from"./@sentry-Do1fUAV5.js";const i=R,U=1e3;let w,D,I;function J(e){const n="dom";C(n,e),H(n,q)}function q(){if(!i.document)return;const e=y.bind(null,"dom"),n=v(e,!0);i.document.addEventListener("click",n,!1),i.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(t=>{const a=i[t]?.prototype;a?.hasOwnProperty?.("addEventListener")&&(E(a,"addEventListener",function(s){return function(o,f,d){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},c=u[o]=u[o]||{refCount:0};if(!c.handler){const l=v(e);c.handler=l,s.call(this,o,l,d)}c.refCount++}catch{}return s.call(this,o,f,d)}}),E(a,"removeEventListener",function(s){return function(o,f,d){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},c=u[o];c&&(c.refCount--,c.refCount<=0&&(s.call(this,o,c.handler,d),c.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,f,d)}}))})}function W(e){if(e.type!==D)return!1;try{if(!e.target||e.target._sentryId!==I)return!1}catch{}return!0}function j(e,n){return e!=="keypress"?!1:n?.tagName?!(n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable):!0}function v(e,n=!1){return t=>{if(!t||t._sentryCaptured)return;const r=B(t);if(j(t.type,r))return;S(t,"_sentryCaptured",!0),r&&!r._sentryId&&S(r,"_sentryId",X());const a=t.type==="keypress"?"input":t.type;W(t)||(e({event:t,name:a,global:n}),D=t.type,I=r?r._sentryId:void 0),clearTimeout(w),w=i.setTimeout(()=>{I=void 0,D=void 0},U)}}function B(e){try{return e.target}catch{return null}}let p;function z(e){const n="history";C(n,e),H(n,F)}function F(){if(i.addEventListener("popstate",()=>{const n=i.location.href,t=p;if(p=n,t===n)return;y("history",{from:t,to:n})}),!M())return;function e(n){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const a=p,s=G(String(r));if(p=s,a===s)return n.apply(this,t);y("history",{from:a,to:s})}return n.apply(this,t)}}E(i.history,"pushState",e),E(i.history,"replaceState",e)}function G(e){try{return new URL(e,i.location.origin).toString()}catch{return e}}const h={};function Q(e){const n=h[e];if(n)return n;let t=i[e];if(P(t))return h[e]=t.bind(i);const r=i.document;if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const s=a.contentWindow;s?.[e]&&(t=s[e]),r.head.removeChild(a)}catch{}return t&&(h[e]=t.bind(i))}function V(e){h[e]=void 0}const m="__sentry_xhr_v3__";function Z(e){const n="xhr";C(n,e),H(n,K)}function K(){if(!i.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(n,t,r){const a=new Error,s=b()*1e3,o=_(r[0])?r[0].toUpperCase():void 0,f=T(r[1]);if(!o||!f)return n.apply(t,r);t[m]={method:o,url:f,request_headers:{}},o==="POST"&&f.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const d=()=>{const u=t[m];if(u&&t.readyState===4){try{u.status_code=t.status}catch{}const c={endTimestamp:b()*1e3,startTimestamp:s,xhr:t,virtualError:a};y("xhr",c)}};return"onreadystatechange"in t&&typeof t.onreadystatechange=="function"?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(u,c,l){return d(),u.apply(c,l)}}):t.addEventListener("readystatechange",d),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(u,c,l){const[k,L]=l,N=c[m];return N&&_(k)&&_(L)&&(N.request_headers[k.toLowerCase()]=L),u.apply(c,l)}}),n.apply(t,r)}}),e.send=new Proxy(e.send,{apply(n,t,r){const a=t[m];if(!a)return n.apply(t,r);r[0]!==void 0&&(a.body=r[0]);const s={startTimestamp:b()*1e3,xhr:t};return y("xhr",s),n.apply(t,r)}})}function T(e){if(_(e))return e;try{return e.toString()}catch{}}export{m as S,J as a,Z as b,V as c,z as d,Q as g};
