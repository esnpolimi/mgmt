import{G as R,a as C,m as H,t as y,f as E,b as S,u as v,s as X,i as B,l as M,c as D,d as m}from"./@sentry-vS1JK4DI.js";const P=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,u=R,q=1e3;let L,b,I;function J(e){const n="dom";C(n,e),H(n,G)}function G(){if(!u.document)return;const e=y.bind(null,"dom"),n=U(e,!0);u.document.addEventListener("click",n,!1),u.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(t=>{const a=u[t]?.prototype;a?.hasOwnProperty?.("addEventListener")&&(E(a,"addEventListener",function(s){return function(o,f,d){if(o==="click"||o=="keypress")try{const i=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},c=i[o]=i[o]||{refCount:0};if(!c.handler){const l=U(e);c.handler=l,s.call(this,o,l,d)}c.refCount++}catch{}return s.call(this,o,f,d)}}),E(a,"removeEventListener",function(s){return function(o,f,d){if(o==="click"||o=="keypress")try{const i=this.__sentry_instrumentation_handlers__||{},c=i[o];c&&(c.refCount--,c.refCount<=0&&(s.call(this,o,c.handler,d),c.handler=void 0,delete i[o]),Object.keys(i).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,f,d)}}))})}function T(e){if(e.type!==b)return!1;try{if(!e.target||e.target._sentryId!==I)return!1}catch{}return!0}function W(e,n){return e!=="keypress"?!1:n?.tagName?!(n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable):!0}function U(e,n=!1){return t=>{if(!t||t._sentryCaptured)return;const r=Y(t);if(W(t.type,r))return;S(t,"_sentryCaptured",!0),r&&!r._sentryId&&S(r,"_sentryId",v());const a=t.type==="keypress"?"input":t.type;T(t)||(e({event:t,name:a,global:n}),b=t.type,I=r?r._sentryId:void 0),clearTimeout(L),L=u.setTimeout(()=>{I=void 0,b=void 0},q)}}function Y(e){try{return e.target}catch{return null}}let _;function z(e){const n="history";C(n,e),H(n,j)}function j(){if(u.addEventListener("popstate",()=>{const n=u.location.href,t=_;if(_=n,t===n)return;y("history",{from:t,to:n})}),!X())return;function e(n){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const a=_,s=F(String(r));if(_=s,a===s)return n.apply(this,t);y("history",{from:a,to:s})}return n.apply(this,t)}}E(u.history,"pushState",e),E(u.history,"replaceState",e)}function F(e){try{return new URL(e,u.location.origin).toString()}catch{return e}}const h={};function Q(e){const n=h[e];if(n)return n;let t=u[e];if(B(t))return h[e]=t.bind(u);const r=u.document;if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const s=a.contentWindow;s?.[e]&&(t=s[e]),r.head.removeChild(a)}catch(a){P&&M.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return t&&(h[e]=t.bind(u))}function V(e){h[e]=void 0}const p="__sentry_xhr_v3__";function Z(e){const n="xhr";C(n,e),H(n,g)}function g(){if(!u.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(n,t,r){const a=new Error,s=D()*1e3,o=m(r[0])?r[0].toUpperCase():void 0,f=K(r[1]);if(!o||!f)return n.apply(t,r);t[p]={method:o,url:f,request_headers:{}},o==="POST"&&f.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const d=()=>{const i=t[p];if(i&&t.readyState===4){try{i.status_code=t.status}catch{}const c={endTimestamp:D()*1e3,startTimestamp:s,xhr:t,virtualError:a};y("xhr",c)}};return"onreadystatechange"in t&&typeof t.onreadystatechange=="function"?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply(i,c,l){return d(),i.apply(c,l)}}):t.addEventListener("readystatechange",d),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(i,c,l){const[k,w]=l,N=c[p];return N&&m(k)&&m(w)&&(N.request_headers[k.toLowerCase()]=w),i.apply(c,l)}}),n.apply(t,r)}}),e.send=new Proxy(e.send,{apply(n,t,r){const a=t[p];if(!a)return n.apply(t,r);r[0]!==void 0&&(a.body=r[0]);const s={startTimestamp:D()*1e3,xhr:t};return y("xhr",s),n.apply(t,r)}})}function K(e){if(m(e))return e;try{return e.toString()}catch{}}export{p as S,J as a,Z as b,V as c,z as d,Q as g};
